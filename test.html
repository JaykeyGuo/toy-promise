<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <!-- <script src="./toy-promise-v2.js"></script> -->
  <script type="module">
    // import ToyPromise from './toy-promise-v1.js';
    // import ToyPromise from './toy-promise-v2.js';
    // import ToyPromise from './toy-promise-v3.js';
    // import ToyPromise from './test.js';

    // setTimeout(() => {
    //   console.log('1111')
    // }, 0);

    // let p = new ToyPromise();
    // console.log(p);
    // new ToyPromise((resolve) => {
    //   resolve();
    // }).then(() => {
    //   console.log('then');
    // })
    
    // TODO: basic test
    // const promise = new ToyPromise((resolve, reject) => {
    //   resolve('成功');
    // }).then(
    //   (data) => {
    //     console.log('success', data)
    //   },
    //   (err) => {
    //     console.log('faild', err)
    //   }
    // )

    // TODO: test catch
    // const promise1 = new ToyPromise((resolve, reject) => {
    //   throw 'Uh-oh!';
    // });

    // promise1.catch((error) => {
    //   console.error(error);
    // });

    // TODO: test allSettled
    const promise1 = ToyPromise.resolve(3);
    const promise2 = new ToyPromise((resolve, reject) => setTimeout(reject, 100, 'foo'));
    const promises = [promise1, promise2];

    ToyPromise.allSettled(promises).
      then((results) => results.forEach((result) => console.log(result)));

    // TODO: test race
    // const promise1 = ToyPromise.resolve(3);
    // const promise2 = new ToyPromise((resolve, reject) => setTimeout(reject, 100, 'foo'));

    // ToyPromise.race([promise1, promise2]).then((value) => {
    //   console.log(value);
    //   // Both resolve, but promise2 is faster
    // });

    // TODO: test any
    // const promise3 = new Promise((resolve) => setTimeout(resolve, 500, 'slow'));

    // const promise1 = Promise.resolve(3);
    // const promise2 = new Promise((resolve, reject) => setTimeout(reject, 100, 'foo'));

    // const promises = [promise1, promise2, promise3];

    // Promise.any(promises).then((value) => console.log(value));
  </script>
</body>
</html>